<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#071629" />
  <title>GEOAI • Region Monitor (Jabodetabek)</title>
  <link rel="preconnect" href="https://api.open-meteo.com" crossorigin>
  <link rel="stylesheet" href="./assets/css/app.css" />
</head>

<body>
  <div class="bg"></div>

  <main class="wrap">
    <section class="card hero" aria-label="Header monitor">
      <div class="hero-top">
        <div class="brand">
          <span class="dot-live" id="liveDot" aria-hidden="true"></span>
          <div class="brand-text">
            <div class="brand-title">GEOAI</div>
            <div class="brand-sub">INDONESIA · JABODETABEK REGION</div>
          </div>
        </div>

        <button class="pill pill-btn" id="regionBtn" aria-haspopup="dialog" aria-controls="sheet" aria-label="Pilih region">
          <span id="regionLabel">Jakarta</span>
          <span class="chev" aria-hidden="true">▾</span>
        </button>
      </div>

      <h1 class="h1">REGION<br>MONITOR</h1>
      <div class="city" id="cityLabel">JAKARTA</div>

      <div class="hero-meta">
        <div class="clock" id="clock" aria-label="Jam lokal">--:--:--</div>

        <div class="status">
          <span class="status-dot ok" id="statusDot" aria-hidden="true"></span>
          <div class="status-text" id="statusText">Ready</div>
        </div>
      </div>
    </section>

    <section class="card risk" aria-label="Analisis risiko">
      <div class="risk-head">
        <div class="kicker">LIVE ANALYSIS · ENVIRONMENTAL RISK LEVEL</div>
        <div class="badge safe" id="riskBadge">—</div>
      </div>

      <div class="chips">
        <div class="chip"><span class="chip-k">NOW</span> <span id="chipNow">--</span></div>
        <div class="chip"><span class="chip-k">1H</span> <span id="chip1h">--</span></div>
        <div class="chip"><span class="chip-k">3H</span> <span id="chip3h">--</span></div>
        <div class="chip"><span class="chip-k">24H</span> <span id="chip24h">--</span></div>
      </div>

      <div class="risk-title" id="riskTitle">—</div>
      <div class="risk-desc" id="riskDesc">
        Model rule-based (eksperimen). Data dari Open-Meteo (current + hourly). Risk = indikasi cepat, bukan peringatan resmi.
      </div>

      <div class="conf">
        <div class="conf-row">
          <div class="conf-k">Confidence</div>
          <div class="conf-v" id="confVal">--%</div>
        </div>
        <div class="bar">
          <div class="bar-in" id="confBar" style="width:0%"></div>
        </div>
      </div>

      <div class="why">
        <div class="why-k">WHY THIS STATUS?</div>
        <div class="why-box" id="whyBox">—</div>
      </div>

      <details class="details" id="detailsBox">
        <summary>Details (data per indikator)</summary>
        <div class="grid2">
          <div class="mini">
            <div class="mini-k">POP</div>
            <div class="mini-v" id="dPop">--%</div>
          </div>
          <div class="mini">
            <div class="mini-k">Gust</div>
            <div class="mini-v" id="dGust">-- km/jam</div>
          </div>
          <div class="mini">
            <div class="mini-k">Soil</div>
            <div class="mini-v" id="dSoil">--%</div>
          </div>
          <div class="mini">
            <div class="mini-k">Updated (hourly)</div>
            <div class="mini-v" id="dTime">--</div>
          </div>
        </div>
        <div class="subnote" id="subnote">—</div>
      </details>
    </section>

    <section class="card metric" aria-label="Metrik lingkungan">
      <div class="metric-k">TEMPERATURE</div>
      <div class="metric-v"><span id="tempVal">--</span><span class="unit">°C</span></div>
      <div class="metric-sub" id="tempUpd">Updated · --</div>
    </section>

    <section class="card metric" aria-label="Presipitasi">
      <div class="metric-k">PRECIPITATION</div>
      <div class="metric-v"><span id="rainVal">--</span><span class="unit">mm</span></div>
      <div class="metric-sub" id="rainUpd">Rain (hourly) · --</div>
    </section>

    <section class="card metric" aria-label="Kelembapan tanah">
      <div class="metric-k">SOIL MOISTURE</div>
      <div class="metric-v"><span id="soilVal">--</span><span class="unit">%</span></div>
      <div class="metric-sub" id="soilUpd">VWC (0–1 cm) scaled to % · --</div>
    </section>

    <footer class="foot">
      <div class="foot-left">
        <div class="foot-title">Data</div>
        <div class="foot-sub">Open-Meteo forecast (current + hourly). Auto refresh <span id="refreshSec">30</span>s.</div>
      </div>
      <div class="foot-pill">
        <div class="foot-pill-k">MODE</div>
        <div class="foot-pill-v" id="modeText">Worst-point (safer)</div>
      </div>
    </footer>
  </main>

  <!-- Bottom sheet -->
  <div class="sheet-backdrop" id="sheetBackdrop" hidden></div>

  <aside class="sheet" id="sheet" role="dialog" aria-modal="true" aria-label="Pilih region" hidden>
    <div class="sheet-head">
      <div class="sheet-title">Pilih wilayah (Jabodetabek)</div>
      <button class="sheet-x" id="sheetClose" aria-label="Tutup">✕</button>
    </div>
    <div class="sheet-body" id="regionList"></div>
  </aside>

  <script type="module" src="./assets/js/app.js"></script>
</body>
</html>
